{{!-- Controles de busca, ordenação e paginação --}}
{{#if baseUrl}}
<div class="mb-4 space-y-4">
    {{!-- Barra de busca e filtros --}}
    <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
        <form method="GET" action="{{baseUrl}}" class="flex-1 w-full md:w-auto">
            <div class="flex gap-2">
                <input 
                    type="text" 
                    name="search" 
                    value="{{#if search}}{{search}}{{/if}}"
                    placeholder="Buscar..." 
                    class="input-field flex-1"
                >
                <button type="submit" class="btn-primary">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </button>
                {{#if search}}
                <a href="{{baseUrl}}" class="btn-secondary">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </a>
                {{/if}}
            </div>
            {{#if sort}}
            <input type="hidden" name="sort" value="{{sort}}">
            {{/if}}
            {{#if order}}
            <input type="hidden" name="order" value="{{order}}">
            {{/if}}
        </form>
        
        {{!-- Seletor de itens por página --}}
        {{#if pagination}}
        <form method="GET" action="{{baseUrl}}" class="flex items-center gap-2">
            <label class="text-sm text-gray-700 dark:text-gray-300">Itens por página:</label>
            <select name="limit" onchange="this.form.submit()" class="input-field w-20">
                <option value="10" {{#if (eq pagination.itemsPerPage 10)}}selected{{/if}}>10</option>
                <option value="25" {{#if (eq pagination.itemsPerPage 25)}}selected{{/if}}>25</option>
                <option value="50" {{#if (eq pagination.itemsPerPage 50)}}selected{{/if}}>50</option>
                <option value="100" {{#if (eq pagination.itemsPerPage 100)}}selected{{/if}}>100</option>
            </select>
            {{#if search}}
            <input type="hidden" name="search" value="{{search}}">
            {{/if}}
            {{#if sort}}
            <input type="hidden" name="sort" value="{{sort}}">
            {{/if}}
            {{#if order}}
            <input type="hidden" name="order" value="{{order}}">
            {{/if}}
        </form>
        {{/if}}
    </div>

    {{!-- Info de resultados --}}
    {{#if pagination}}
    <div class="text-sm text-gray-600 dark:text-gray-400">
        {{#if pagination.totalItems}}
            {{#if (gt pagination.totalItems 0)}}
                Mostrando {{pagination.startItem}} a {{pagination.endItem}} de {{pagination.totalItems}} resultado(s)
            {{else}}
                Nenhum resultado encontrado
            {{/if}}
        {{else}}
            Nenhum resultado encontrado
        {{/if}}
    </div>
    {{/if}}
</div>
{{/if}}

{{!-- Paginação --}}
{{#if pagination}}
{{#if baseUrl}}
{{#if pagination.hasNextPage}}
<div class="mt-4 flex items-center justify-between">
    <div class="flex gap-2">
        {{#if pagination.hasPrevPage}}
        <a href="{{baseUrl}}?page={{pagination.prevPage}}{{#if search}}&search={{search}}{{/if}}{{#if sort}}&sort={{sort}}&order={{order}}{{/if}}{{#if pagination.itemsPerPage}}&limit={{pagination.itemsPerPage}}{{/if}}" 
           class="btn-secondary">
            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Anterior
        </a>
        {{/if}}
        
        <a href="{{baseUrl}}?page={{pagination.nextPage}}{{#if search}}&search={{search}}{{/if}}{{#if sort}}&sort={{sort}}&order={{order}}{{/if}}{{#if pagination.itemsPerPage}}&limit={{pagination.itemsPerPage}}{{/if}}" 
           class="btn-secondary">
            Próxima
            <svg class="w-4 h-4 inline ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </a>
    </div>
    
    <div class="text-sm text-gray-600 dark:text-gray-400">
        Página {{pagination.currentPage}} de {{pagination.totalPages}}
    </div>
</div>
{{else}}
{{#if pagination.hasPrevPage}}
<div class="mt-4 flex items-center justify-between">
    <div class="flex gap-2">
        <a href="{{baseUrl}}?page={{pagination.prevPage}}{{#if search}}&search={{search}}{{/if}}{{#if sort}}&sort={{sort}}&order={{order}}{{/if}}{{#if pagination.itemsPerPage}}&limit={{pagination.itemsPerPage}}{{/if}}" 
           class="btn-secondary">
            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Anterior
        </a>
    </div>
    <div class="text-sm text-gray-600 dark:text-gray-400">
        Página {{pagination.currentPage}} de {{pagination.totalPages}}
    </div>
</div>
{{/if}}
{{/if}}
{{/if}}
{{/if}}

